(function(a){var e=[];var t={options:{prependExistingHelpBlock:false,sniffHtml:true,preventSubmit:true,submitError:false,submitSuccess:false,semanticallyStrict:false,autoAdd:{helpBlocks:true},filter:function a(){return true}},methods:{init:function r(o){var l=a.extend(true,{},t);l.options=a.extend(true,l.options,o);var s=this;var d=a.unique(s.map(function(){return a(this).parents("form")[0]}).toArray());a(d).bind("submit",function(e){var t=a(this);var i=0;var n=t.find("input,textarea,select").not("[type=submit],[type=image]").filter(l.options.filter);n.trigger("submit.validation").trigger("validationLostFocus.validation");n.each(function(e,t){var n=a(t),r=n.parents(".control-group").first();if(r.hasClass("warning")){r.removeClass("warning").addClass("error");i++}});n.trigger("validationLostFocus.validation");if(i){if(l.options.preventSubmit){e.preventDefault()}t.addClass("error");if(a.isFunction(l.options.submitError)){l.options.submitError(t,e,n.jqBootstrapValidation("collectErrors",true))}}else{t.removeClass("error");if(a.isFunction(l.options.submitSuccess)){l.options.submitSuccess(t,e)}}});return this.each(function(){var t=a(this),r=t.parents(".control-group").first(),o=r.find(".help-block").first(),s=t.parents("form").first(),d=[];if(!o.length&&l.options.autoAdd&&l.options.autoAdd.helpBlocks){o=a('<div class="help-block" />');r.find(".controls").append(o);e.push(o[0])}if(l.options.sniffHtml){var u="";if(t.attr("pattern")!==undefined){u="Not in the expected format\x3c!-- data-validation-pattern-message to override --\x3e";if(t.data("validationPatternMessage")){u=t.data("validationPatternMessage")}t.data("validationPatternMessage",u);t.data("validationPatternRegex",t.attr("pattern"))}if(t.attr("max")!==undefined||t.attr("aria-valuemax")!==undefined){var c=t.attr("max")!==undefined?t.attr("max"):t.attr("aria-valuemax");u="Too high: Maximum of '"+c+"'\x3c!-- data-validation-max-message to override --\x3e";if(t.data("validationMaxMessage")){u=t.data("validationMaxMessage")}t.data("validationMaxMessage",u);t.data("validationMaxMax",c)}if(t.attr("min")!==undefined||t.attr("aria-valuemin")!==undefined){var v=t.attr("min")!==undefined?t.attr("min"):t.attr("aria-valuemin");u="Too low: Minimum of '"+v+"'\x3c!-- data-validation-min-message to override --\x3e";if(t.data("validationMinMessage")){u=t.data("validationMinMessage")}t.data("validationMinMessage",u);t.data("validationMinMin",v)}if(t.attr("maxlength")!==undefined){u="Too long: Maximum of '"+t.attr("maxlength")+"' characters\x3c!-- data-validation-maxlength-message to override --\x3e";if(t.data("validationMaxlengthMessage")){u=t.data("validationMaxlengthMessage")}t.data("validationMaxlengthMessage",u);t.data("validationMaxlengthMaxlength",t.attr("maxlength"))}if(t.attr("minlength")!==undefined){u="Too short: Minimum of '"+t.attr("minlength")+"' characters\x3c!-- data-validation-minlength-message to override --\x3e";if(t.data("validationMinlengthMessage")){u=t.data("validationMinlengthMessage")}t.data("validationMinlengthMessage",u);t.data("validationMinlengthMinlength",t.attr("minlength"))}if(t.attr("required")!==undefined||t.attr("aria-required")!==undefined){u=l.builtInValidators.required.message;if(t.data("validationRequiredMessage")){u=t.data("validationRequiredMessage")}t.data("validationRequiredMessage",u)}if(t.attr("type")!==undefined&&t.attr("type").toLowerCase()==="number"){u=l.builtInValidators.number.message;if(t.data("validationNumberMessage")){u=t.data("validationNumberMessage")}t.data("validationNumberMessage",u)}if(t.attr("type")!==undefined&&t.attr("type").toLowerCase()==="email"){u="Not a valid email address\x3c!-- data-validator-validemail-message to override --\x3e";if(t.data("validationValidemailMessage")){u=t.data("validationValidemailMessage")}else if(t.data("validationEmailMessage")){u=t.data("validationEmailMessage")}t.data("validationValidemailMessage",u)}if(t.attr("minchecked")!==undefined){u="Not enough options checked; Minimum of '"+t.attr("minchecked")+"' required\x3c!-- data-validation-minchecked-message to override --\x3e";if(t.data("validationMincheckedMessage")){u=t.data("validationMincheckedMessage")}t.data("validationMincheckedMessage",u);t.data("validationMincheckedMinchecked",t.attr("minchecked"))}if(t.attr("maxchecked")!==undefined){u="Too many options checked; Maximum of '"+t.attr("maxchecked")+"' required\x3c!-- data-validation-maxchecked-message to override --\x3e";if(t.data("validationMaxcheckedMessage")){u=t.data("validationMaxcheckedMessage")}t.data("validationMaxcheckedMessage",u);t.data("validationMaxcheckedMaxchecked",t.attr("maxchecked"))}}if(t.data("validation")!==undefined){d=t.data("validation").split(",")}a.each(t.data(),function(a,e){var t=a.replace(/([A-Z])/g,",$1").split(",");if(t[0]==="validation"&&t[1]){d.push(t[1])}});var m=d;var g=[];do{a.each(d,function(a,e){d[a]=i(e)});d=a.unique(d);g=[];a.each(m,function(e,n){if(t.data("validation"+n+"Shortcut")!==undefined){a.each(t.data("validation"+n+"Shortcut").split(","),function(a,e){g.push(e)})}else if(l.builtInValidators[n.toLowerCase()]){var r=l.builtInValidators[n.toLowerCase()];if(r.type.toLowerCase()==="shortcut"){a.each(r.shortcut.split(","),function(a,e){e=i(e);g.push(e);d.push(e)})}}});m=g}while(m.length>0);var f={};a.each(d,function(e,n){var r=t.data("validation"+n+"Message");var o=r!==undefined;var s=false;r=r?r:"'"+n+"' validation failed \x3c!-- Add attribute 'data-validation-"+n.toLowerCase()+"-message' to input to change this message --\x3e";a.each(l.validatorTypes,function(e,o){if(f[e]===undefined){f[e]=[]}if(!s&&t.data("validation"+n+i(o.name))!==undefined){f[e].push(a.extend(true,{name:i(o.name),message:r},o.init(t,n)));s=true}});if(!s&&l.builtInValidators[n.toLowerCase()]){var d=a.extend(true,{},l.builtInValidators[n.toLowerCase()]);if(o){d.message=r}var u=d.type.toLowerCase();if(u==="shortcut"){s=true}else{a.each(l.validatorTypes,function(e,r){if(f[e]===undefined){f[e]=[]}if(!s&&u===e.toLowerCase()){t.data("validation"+n+i(r.name),d[r.name.toLowerCase()]);f[u].push(a.extend(d,r.init(t,n)));s=true}})}}if(!s){a.error("Cannot find validation info for '"+n+"'")}});o.data("original-contents",o.data("original-contents")?o.data("original-contents"):o.html());o.data("original-role",o.data("original-role")?o.data("original-role"):o.attr("role"));r.data("original-classes",r.data("original-clases")?r.data("original-classes"):r.attr("class"));t.data("original-aria-invalid",t.data("original-aria-invalid")?t.data("original-aria-invalid"):t.attr("aria-invalid"));t.bind("validation.validation",function(e,i){var r=n(t);var o=[];a.each(f,function(e,n){if(r||r.length||i&&i.includeEmpty||!!l.validatorTypes[e].blockSubmit&&i&&!!i.submitting){a.each(n,function(a,i){if(l.validatorTypes[e].validate(t,r,i)){o.push(i.message)}})}});return o});t.bind("getValidators.validation",function(){return f});t.bind("submit.validation",function(){return t.triggerHandler("change.validation",{submitting:true})});t.bind(["keyup","focus","blur","click","keydown","keypress","change"].join(".validation ")+".validation",function(e,i){var d=n(t);var u=[];r.find("input,textarea,select").each(function(e,n){var r=u.length;a.each(a(n).triggerHandler("validation.validation",i),function(a,e){u.push(e)});if(u.length>r){a(n).attr("aria-invalid","true")}else{var o=t.data("original-aria-invalid");a(n).attr("aria-invalid",o!==undefined?o:false)}});s.find("input,select,textarea").not(t).not('[name="'+t.attr("name")+'"]').trigger("validationLostFocus.validation");u=a.unique(u.sort());if(u.length){r.removeClass("success error").addClass("warning");if(l.options.semanticallyStrict&&u.length===1){o.html(u[0]+(l.options.prependExistingHelpBlock?o.data("original-contents"):""))}else{o.html('<ul role="alert"><li>'+u.join("</li><li>")+"</li></ul>"+(l.options.prependExistingHelpBlock?o.data("original-contents"):""))}}else{r.removeClass("warning error success");if(d.length>0){r.addClass("success")}o.html(o.data("original-contents"))}if(e.type==="blur"){r.removeClass("success")}});t.bind("validationLostFocus.validation",function(){r.removeClass("success")})})},destroy:function t(){return this.each(function(){var t=a(this),i=t.parents(".control-group").first(),n=i.find(".help-block").first();t.unbind(".validation");n.html(n.data("original-contents"));i.attr("class",i.data("original-classes"));t.attr("aria-invalid",t.data("original-aria-invalid"));n.attr("role",t.data("original-role"));if(e.indexOf(n[0])>-1){n.remove()}})},collectErrors:function e(t){var i={};this.each(function(e,t){var n=a(t);var r=n.attr("name");var o=n.triggerHandler("validation.validation",{includeEmpty:true});i[r]=a.extend(true,o,i[r])});a.each(i,function(a,e){if(e.length===0){delete i[a]}});return i},hasErrors:function e(){var t=[];this.each(function(e,i){t=t.concat(a(i).triggerHandler("getValidators.validation")?a(i).triggerHandler("validation.validation",{submitting:true}):[])});return t.length>0},override:function e(i){t=a.extend(true,t,i)}},validatorTypes:{callback:{name:"callback",init:function a(e,t){return{validatorName:t,callback:e.data("validation"+t+"Callback"),lastValue:e.val(),lastValid:true,lastFinished:true}},validate:function a(e,t,i){if(i.lastValue===t&&i.lastFinished){return!i.lastValid}if(i.lastFinished===true){i.lastValue=t;i.lastValid=true;i.lastFinished=false;var n=i;var r=e;o(i.callback,window,e,t,function(a){if(n.lastValue===a.value){n.lastValid=a.valid;if(a.message){n.message=a.message}n.lastFinished=true;r.data("validation"+n.validatorName+"Message",n.message);setTimeout(function(){r.trigger("change.validation")},1)}})}return false}},ajax:{name:"ajax",init:function a(e,t){return{validatorName:t,url:e.data("validation"+t+"Ajax"),lastValue:e.val(),lastValid:true,lastFinished:true}},validate:function e(t,i,n){if(""+n.lastValue===""+i&&n.lastFinished===true){return n.lastValid===false}if(n.lastFinished===true){n.lastValue=i;n.lastValid=true;n.lastFinished=false;a.ajax({url:n.url,data:"value="+i+"&field="+t.attr("name"),dataType:"json",success:function a(e){if(""+n.lastValue===""+e.value){n.lastValid=!!e.valid;if(e.message){n.message=e.message}n.lastFinished=true;t.data("validation"+n.validatorName+"Message",n.message);setTimeout(function(){t.trigger("change.validation")},1)}},failure:function a(){n.lastValid=true;n.message="ajax call failed";n.lastFinished=true;t.data("validation"+n.validatorName+"Message",n.message);setTimeout(function(){t.trigger("change.validation")},1)}})}return false}},regex:{name:"regex",init:function a(e,t){return{regex:r(e.data("validation"+t+"Regex"))}},validate:function a(e,t,i){return!i.regex.test(t)&&!i.negative||i.regex.test(t)&&i.negative}},required:{name:"required",init:function a(e,t){return{}},validate:function a(e,t,i){return!!(t.length===0&&!i.negative)||!!(t.length>0&&i.negative)},blockSubmit:true},match:{name:"match",init:function a(e,t){var i=e.parents("form").first().find('[name="'+e.data("validation"+t+"Match")+'"]').first();i.bind("validation.validation",function(){e.trigger("change.validation",{submitting:true})});return{element:i}},validate:function a(e,t,i){return t!==i.element.val()&&!i.negative||t===i.element.val()&&i.negative},blockSubmit:true},max:{name:"max",init:function a(e,t){return{max:e.data("validation"+t+"Max")}},validate:function a(e,t,i){return parseFloat(t,10)>parseFloat(i.max,10)&&!i.negative||parseFloat(t,10)<=parseFloat(i.max,10)&&i.negative}},min:{name:"min",init:function a(e,t){return{min:e.data("validation"+t+"Min")}},validate:function a(e,t,i){return parseFloat(t)<parseFloat(i.min)&&!i.negative||parseFloat(t)>=parseFloat(i.min)&&i.negative}},maxlength:{name:"maxlength",init:function a(e,t){return{maxlength:e.data("validation"+t+"Maxlength")}},validate:function a(e,t,i){return t.length>i.maxlength&&!i.negative||t.length<=i.maxlength&&i.negative}},minlength:{name:"minlength",init:function a(e,t){return{minlength:e.data("validation"+t+"Minlength")}},validate:function a(e,t,i){return t.length<i.minlength&&!i.negative||t.length>=i.minlength&&i.negative}},maxchecked:{name:"maxchecked",init:function a(e,t){var i=e.parents("form").first().find('[name="'+e.attr("name")+'"]');i.bind("click.validation",function(){e.trigger("change.validation",{includeEmpty:true})});return{maxchecked:e.data("validation"+t+"Maxchecked"),elements:i}},validate:function a(e,t,i){return i.elements.filter(":checked").length>i.maxchecked&&!i.negative||i.elements.filter(":checked").length<=i.maxchecked&&i.negative},blockSubmit:true},minchecked:{name:"minchecked",init:function a(e,t){var i=e.parents("form").first().find('[name="'+e.attr("name")+'"]');i.bind("click.validation",function(){e.trigger("change.validation",{includeEmpty:true})});return{minchecked:e.data("validation"+t+"Minchecked"),elements:i}},validate:function a(e,t,i){return i.elements.filter(":checked").length<i.minchecked&&!i.negative||i.elements.filter(":checked").length>=i.minchecked&&i.negative},blockSubmit:true}},builtInValidators:{email:{name:"Email",type:"shortcut",shortcut:"validemail"},validemail:{name:"Validemail",type:"regex",regex:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}",message:"Not a valid email address\x3c!-- data-validator-validemail-message to override --\x3e"},passwordagain:{name:"Passwordagain",type:"match",match:"password",message:"Does not match the given password\x3c!-- data-validator-paswordagain-message to override --\x3e"},positive:{name:"Positive",type:"shortcut",shortcut:"number,positivenumber"},negative:{name:"Negative",type:"shortcut",shortcut:"number,negativenumber"},number:{name:"Number",type:"regex",regex:"([+-]?\\d+(\\.\\d*)?([eE][+-]?[0-9]+)?)?",message:"Must be a number\x3c!-- data-validator-number-message to override --\x3e"},integer:{name:"Integer",type:"regex",regex:"[+-]?\\d+",message:"No decimal places allowed\x3c!-- data-validator-integer-message to override --\x3e"},positivenumber:{name:"Positivenumber",type:"min",min:0,message:"Must be a positive number\x3c!-- data-validator-positivenumber-message to override --\x3e"},negativenumber:{name:"Negativenumber",type:"max",max:0,message:"Must be a negative number\x3c!-- data-validator-negativenumber-message to override --\x3e"},required:{name:"Required",type:"required",message:"This is required\x3c!-- data-validator-required-message to override --\x3e"},checkone:{name:"Checkone",type:"minchecked",minchecked:1,message:"Check at least one option\x3c!-- data-validation-checkone-message to override --\x3e"}}};var i=function a(e){return e.toLowerCase().replace(/(^|\s)([a-z])/g,function(a,e,t){return e+t.toUpperCase()})};var n=function e(t){var i=t.val();var n=t.attr("type");if(n==="checkbox"){i=t.is(":checked")?i:""}if(n==="radio"){i=a('input[name="'+t.attr("name")+'"]:checked').length>0?i:""}return i};function r(a){return new RegExp("^"+a+"$")}function o(a,e){var t=Array.prototype.slice.call(arguments).splice(2);var i=a.split(".");var n=i.pop();for(var r=0;r<i.length;r++){e=e[i[r]]}return e[n].apply(this,t)}a.fn.jqBootstrapValidation=function(e){if(t.methods[e]){return t.methods[e].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof e==="object"||!e){return t.methods.init.apply(this,arguments)}else{a.error("Method "+e+" does not exist on jQuery.jqBootstrapValidation");return null}};a.jqBootstrapValidation=function(e){a(":input").not("[type=image],[type=submit]").jqBootstrapValidation.apply(this,arguments)}})(jQuery);